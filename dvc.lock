schema: '2.0'
stages:
  prepare:
    cmd: python src/data/prepare.py
    deps:
    - path: data/raw/imdb_test.csv
      hash: md5
      md5: 90b9367c418d3ca633671eef1d0aff5f
      size: 32565148
    - path: data/raw/imdb_train.csv
      hash: md5
      md5: 62acf68c544d136cc6675df497b6a01f
      size: 33347168
    - path: src/data/prepare.py
      hash: md5
      md5: 49742a437f424de3a23e9aae161a6a0e
      size: 1946
    params:
      params.yaml:
        data:
          raw:
            train: data/raw/imdb_train.csv
            test: data/raw/imdb_test.csv
          processed:
            train: data/processed/train_clean.csv
            test: data/processed/test_clean.csv
          split_info: data/split_info.json
          schema:
            text_col: text
            label_col: label
            label_domain:
            - 0
            - 1
          split:
            strategy: fixed_from_split_info
            train_ratio: 0.5
        preprocessing:
          lowercase: true
          remove_html_tags: true
          normalize_whitespace: true
        random_seed: 42
    outs:
    - path: data/processed/test_clean.csv
      hash: md5
      md5: 8145836ead885f282084a18a123ca148
      size: 32006125
    - path: data/processed/train_clean.csv
      hash: md5
      md5: f69bc445206bd459cb661b0c26cce5b9
      size: 32778301
  features:
    cmd: python src/features/build_features.py
    deps:
    - path: data/processed/test_clean.csv
      hash: md5
      md5: 8145836ead885f282084a18a123ca148
      size: 32006125
    - path: data/processed/train_clean.csv
      hash: md5
      md5: f69bc445206bd459cb661b0c26cce5b9
      size: 32778301
    - path: src/features/build_features.py
      hash: md5
      md5: a6e495544fae15c5c3c11da16dc3ff67
      size: 2316
    params:
      params.yaml:
        features:
          vectorizer: tfidf
          tfidf:
            max_features: 10000
            ngram_range:
            - 1
            - 2
            min_df: 2
            max_df: 0.95
          outputs:
            train_features: data/processed/train_features.npz
            test_features: data/processed/test_features.npz
            vectorizer_path: models/tfidf_vectorizer.pkl
    outs:
    - path: data/processed/test_features.npz
      hash: md5
      md5: 75e78dd124c934331a5ea26f6a631373
      size: 40229579
    - path: data/processed/train_features.npz
      hash: md5
      md5: ee7ac54a11e33304eeb87ad67f487dbc
      size: 42017446
    - path: models/tfidf_vectorizer.pkl
      hash: md5
      md5: 63f3d6dce7c71337a340a34c4bc8ee6b
      size: 377534
  train:
    cmd: python src/modeling/train.py
    deps:
    - path: data/processed/train_features.npz
      hash: md5
      md5: ee7ac54a11e33304eeb87ad67f487dbc
      size: 42017446
    - path: src/modeling/train.py
      hash: md5
      md5: 6717ac7a98424414a09d6a3d750b44f0
      size: 1597
    params:
      params.yaml:
        train:
          model_type: logistic_regression
          logreg:
            max_iter: 1000
            random_state: 42
          outputs:
            model_path: models/model.pkl
    outs:
    - path: models/model.pkl
      hash: md5
      md5: b3428f423740594b2e47ddceb2ba24c2
      size: 80891
